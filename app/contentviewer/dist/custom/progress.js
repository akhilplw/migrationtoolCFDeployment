sap.ui.define(["sap/ui/core/Core","sap/m/Dialog","sap/m/DialogType","sap/m/Button","sap/m/Text","sap/m/ProgressIndicator","sap/ui/layout/VerticalLayout"],function(t,e,s,n,o,i,r){const a=1500;return{enabledForSingleSelect:function(t,e){return e&&e.length===1},startGetIntegrationContent:function(c,g){this.context=c||g[0];const l=this;this.progressDialog=new e({type:s.Message,title:"Progress",contentWidth:"600px",contentHeight:"200px",content:[new r("vl",{width:"100%",content:[new o("textTop",{text:"Initializing ..."}),new i("progressPackages",{displayValue:"0%",displayOnly:true,percentValue:0}),new o("textBottom1",{text:""}),new o("textBottom2",{text:""})]}).addStyleClass("sapUiContentPadding")],endButton:new n("btnClose",{text:"Close",visible:false,press:function(){this.progressDialog.close()}.bind(this)}),escapeHandler:function(t){t.reject()},afterClose:function(){l.timeout&&clearTimeout(l.timeout);this.destroy()}});this.setProgressStatus=function(e,s,n,o){t.byId("progressPackages").setDisplayValue(e+"%");t.byId("progressPackages").setPercentValue(+e);t.byId("textTop").setText(s);t.byId("textBottom1").setText(n);t.byId("textBottom2").setText(o)};this.refresh=function(){$.ajax({url:"odata/v4/config/getIntegrationContentStatus()",type:"GET",success:e=>{if(e.Running){l.setProgressStatus(e.Progress,`Downloading content for ${e.Tenant} ...`,e.Topic,e.Item);l.timeout=setTimeout(l.refresh,a)}else{l.setProgressStatus(100,`Downloading content for ${e.Tenant} ...`,e.Topic,e.Item);l.editFlow.invokeAction("ConfigService.Tenant_getIntegrationContentRefresh",{contexts:l.context}).then(e=>{t.byId("progressPackages").setState("Success");t.byId("btnClose").setVisible(true)})}},error:(e,s,n)=>{t.byId("progressPackages").setState("Error");t.byId("textBottom1").setText(s);t.byId("btnClose").setVisible(true)}})};this.editFlow.invokeAction("ConfigService.Tenant_getIntegrationContent",{contexts:this.context}).then(t=>{this.progressDialog.open();l.refresh()})}}});
//# sourceMappingURL=progress.js.map